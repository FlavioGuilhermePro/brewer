<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Brewer</title>
    <link rel="stylesheet" th:href="@{/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Estilos extras para o Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .metric-card {
            text-align: center;
        }
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--cor-primary);
            margin: 10px 0;
        }
        .metric-label {
            color: #666;
            font-size: 1.1em;
        }
        .metric-card i {
            font-size: 2.5em;
            color: var(--cor-accent);
        }
    </style>
</head>
<body>
<nav class="topbar">
    <a th:href="@{/dashboard}" class="topbar-logo">
        <img th:src="@{/images/logo-brewer.png}" alt="Logo Brewer Admin">
        Brewer Admin
    </a>
    <div class="topbar-user">
        <span>Administrador</span>
        <a th:href="@{/logout}" title="Sair">Sair</a>
    </div>
</nav>

<div class="layout-container">
    <aside class="sidebar">
        <nav class="sidebar-nav">
            <ul>
                <li><a th:href="@{/dashboard}" class="active">Dashboard</a></li>
                <li><a th:href="@{/brewer/listar}">Estoque de Cervejas</a></li>
                <li><a th:href="@{/cliente/listar}">Cadastro de Clientes</a></li>
                <li><a th:href="@{/pedido/listar}">Gerenciar Pedidos</a></li>
            </ul>
        </nav>
    </aside>

    <main class="content-area">
        <div class="page-header">
            <h1>Dashboard de Gestão</h1>
        </div>

        <div class="dashboard-grid">
            <!-- Card 1: Faturamento do Mês -->
            <div class="card metric-card">
                <i class="fas fa-dollar-sign"></i>
                <div class="metric-label">Faturamento do Mês</div>
                <div class="metric-value" th:text="'R$ ' + ${#numbers.formatDecimal(dados.faturamentoMes, 1, 'COMMA', 2, 'POINT')}">R$ 0,00</div>
            </div>

            <!-- Card 2: Pedidos Hoje -->
            <div class="card metric-card">
                <i class="fas fa-shopping-cart"></i>
                <div class="metric-label">Pedidos Hoje</div>
                <div class="metric-value" th:text="${dados.pedidosHoje}">0</div>
            </div>

            <!-- Card 3: Cerveja Mais Vendida -->
            <div class="card metric-card">
                <i class="fas fa-trophy"></i>
                <div class="metric-label">Cerveja Mais Vendida</div>
                <div class="metric-value" th:text="${dados.cervejaMaisVendida}">N/A</div>
            </div>
        </div>

        <!-- Segunda linha de cards -->
        <div class="dashboard-grid" style="margin-top: 20px;">
            <!-- Card 4: Pedidos por Status -->
            <div class="card">
                <h2>Pedidos por Status</h2>
                <ul style="list-style: none; padding: 0;">
                    <li th:each="entry : ${dados.pedidosPorStatus}" style="margin-bottom: 10px; display: flex; justify-content: space-between;">
                        <span th:text="${entry.key}">Status</span>
                        <strong th:text="${entry.value}">0</strong>
                    </li>
                </ul>
            </div>

            <!-- Card 5: Estoque Baixo -->
            <div class="card">
                <h2><i class="fas fa-exclamation-triangle" style="color: var(--cor-warning);"></i> Estoque Baixo</h2>
                <div th:if="${#lists.isEmpty(dados.estoqueBaixo)}">
                    <p>Nenhuma cerveja com estoque baixo no momento.</p>
                </div>
                <ul th:if="${!#lists.isEmpty(dados.estoqueBaixo)}" style="list-style: none; padding: 0;">
                    <li th:each="cerveja : ${dados.estoqueBaixo}" style="margin-bottom: 8px;">
                        <span th:text="${cerveja.nome}">Nome da Cerveja</span> -
                        <strong style="color: var(--cor-error);" th:text="${cerveja.quantidadeEstoque} + ' unidades'">0 unidades</strong>
                    </li>
                </ul>
            </div>
        </div>
    </main>
</div>
</body>
</html>